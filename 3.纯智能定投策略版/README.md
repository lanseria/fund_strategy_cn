# 纯智能定投策略 (择时买入并持有)

本项目实现并回测了一种**优化的“买入并持有”策略**，其核心是**只在市场相对低估时进行分批买入，并长期持有，永不卖出**。该策略适合坚信资产长期价值，但又希望通过择时来降低平均持仓成本的长期投资者。

与传统投资方式相比，本策略具有以下特点：
-   **优于“一次性买入并持有”**：通过在低位分批建仓，有效降低了平均成本，减少了在市场高点一次性投入的风险。
-   **优于“无脑定投”**：避免了在市场明显过热时仍然买入，从而提高了资金的利用效率，防止在高位“站岗”。

整个工作流均由 Python 的 `backtrader`, `akshare`, 和 `quantstats` 库自动化完成。

## 策略逻辑

该策略的逻辑非常纯粹和简单：

1.  **基准线**: 策略使用一条长期移动平均线（例如120日均线）作为判断市场高低位的“估值中枢”。
2.  **定投日**: 在每个月的固定日期（例如1号）检查是否满足买入条件。
3.  **买入条件**:
    -   如果当天是定投日，并且**当前基金净值低于基准线**，策略认为市场处于相对“便宜”的区域，执行一笔固定金额的投资。
    -   如果当前净值**高于**基准线，则认为入场时机不佳，本月**不进行任何操作**。
4.  **持有策略**: **无卖出条件**。一旦买入，仓位将被永久持有，直到回测结束。

这个策略的本质是在一个长期的上升趋势中，尽可能多地抓住回调和盘整的机会来积累廉价的筹码。

## 如何使用本项目

### 1. 环境准备

请确保您已安装 Python，然后通过以下命令安装所需的库：

```bash
pip install backtrader akshare quantstats pandas
```

### 2. 参数配置

所有策略参数都集中在脚本的顶部，方便您进行调整：

```python
# --- 基础配置 ---
FUND_SYMBOL = '001632'          # 基金代码
BENCHMARK_SYMBOL = 'sh000300'   # 基准指数代码
START_DATE = '20180101'         # 回测开始日期
END_DATE = '20231231'           # 回测结束日期
INITIAL_CASH = 200000.0         # 初始资金 (定投策略需要较多现金)
COMMISSION_RATE = 0.0015        # 手续费率

# --- 智能定投策略参数 ---
INVESTMENT_DAY = 1                # 每月定投日
BASE_INVESTMENT_AMOUNT = 5000.0   # 单次定投基础金额
BASELINE_MA_PERIOD = 120          # 判断高低点的基准移动平均线周期
```

**注意**: 由于此策略会不断投入资金，请确保 `INITIAL_CASH` 设置得足够高，以覆盖整个回测期间的定投需求。

### 3. 运行回测

在您的终端中执行脚本：

```bash
python smart_aci_only_strategy.py
```

### 4. 解读输出

脚本运行后，您将获得：

**a) 控制台日志:**
详细记录了每一次买入决策的过程。

```
...
2020-09-01: 到达定投日，且价格低于基准线，准备买入。

--- 交易执行 ---
日期: 2020-09-02
操作: 智能定投买入 (BUY)
成交份额: 2015.32, 价格: 2.4810
交易金额: 5000.00, 手续费: 7.50
-----------------
...
2021-03-01: 到达定投日，但价格高于基准线，本月不投。
```

**b) 绩效分析报告 (HTML):**
一个名为 `strategy_report_{基金代码}_smart_aci_only.html` 的交互式HTML报告。请在浏览器中打开此文件，它会详细展示策略的净值曲线、年化收益、最大回撤等关键指标，并与基准指数进行对比，让您直观地看到“择时买入”相比于“无脑持有”的优势和劣势。

## 总结

本项目为长期投资者提供了一种简单而有效的成本优化工具。它完美诠释了“好的价格比好的公司更重要”的投资理念变种——“在好的时机买入好的资产”。通过回测，您可以验证这种方法在不同市场周期下的表现，并为自己的长期投资决策提供数据支持。